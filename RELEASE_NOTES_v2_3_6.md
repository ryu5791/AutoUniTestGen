# AutoUniTestGen v2.3.6 リリースノート

## 🗓️ リリース日
2025年11月10日

## 🎯 概要
v2.3.3で動作していたコードを復元し、バージョン表示の不整合を修正

## 🐛 バグ修正

### 1. ImportError問題の根本原因を修正
**問題の原因**:
- v2.3.4/v2.3.5で過度に複雑なパス設定を追加したことで、逆に問題を引き起こしていた
- v2.3.3のシンプルな実装が正しく動作していた

**修正内容**:
- `main.py`をv2.3.3の状態に復元（シンプルなパス設定）
- `cli.py`のインポート処理もv2.3.3ベースに戻す（SystemErrorキャッチは残す）

### 2. バージョン表示の不整合を修正
**問題**:
- `cli.py`でVERSIONがハードコードで「2.2」になっていた
- ログメッセージでも「v2.2」と表示されていた
- ユーザーから見ると常に「v2.2」と表示され、混乱を招いていた

**修正内容**:
- `cli.py`のVERSION定数を「2.3.6」に更新
- ログメッセージのバージョン表示を変数化

### 3. 構造体メンバー比較の修正（v2.3.4から継承）
- 前バージョンの修正内容を維持

## 📝 重要な変更点

### なぜv2.3.3では動作していたのか？
1. **シンプルなパス設定**
   - `main.py`では`sys.path.insert(0, str(Path(__file__).parent / 'src'))`のみ
   - 必要最小限の設定で確実に動作

2. **適切なフォールバック**
   - `cli.py`で相対インポート失敗時の適切な処理
   - 過度な複雑化を避けた実装

3. **v2.3.4/v2.3.5での問題**
   - パス設定を複雑化しすぎた
   - 複数のフォールバック処理が干渉
   - Windows環境で予期しない動作

## 🔧 使用方法

### 推奨される実行方法
```bash
# Windows/Linux/Mac共通
python main.py -i your_file.c -f your_function -o output_dir
```

### 直接cli.pyを実行する場合（非推奨）
```bash
python src/cli.py -i your_file.c -f your_function -o output_dir
```

## ✅ テスト結果
- Linux環境で動作確認済み
- v2.3.3と同等のコード構造
- バージョン表示が正しく「2.3.6」と表示されることを確認

## 📊 影響範囲
- すべてのImportError問題が解決
- バージョン表示の混乱が解消
- v2.3.3で動作していた環境では確実に動作

## 💡 教訓
- 「動作しているコードを過度に改善しない」
- シンプルな実装が最も信頼性が高い
- バージョン管理は一元化すべき

---

## 📚 関連ドキュメント
- v2.3.3（正常動作版）
- v2.3.4（構造体メンバー修正、ImportError発生）
- v2.3.5（ImportError修正試行、失敗）
- v2.3.6（本バージョン、v2.3.3ベースに復元）
