# AutoUniTestGen v2.10.1 リリースノート

**リリース日**: 2025-11-21  
**前バージョン**: v2.9.0  

## 🎯 概要

バージョン2.10.1では、出力ファイルのエンコーディングをShift-JISに統一し、日本の開発環境での互換性を向上させました。設定ファイルからエンコーディングを変更可能になりました。

## ✨ 新機能

### 1. 🌐 UTF-8エンコーディング完全対応
- テストコード生成時のエンコーディングをUTF-8に統一
- 日本語コメントの文字化け問題を修正
- スタンドアロンモードでもUTF-8で出力

## 🐛 バグ修正

### 1. エンコーディング関連
- **問題**: スタンドアロンモードで生成されたテストコードの日本語コメントが文字化け
- **原因**: `c_test_auto_generator.py`の218行目でShift-JISエンコーディングを使用
- **修正**: UTF-8エンコーディングに変更
- **影響**: 日本語を含むコメントが正しく表示されるようになった

```python
# 修正前 (v2.9.0)
with open(str(test_code_path), 'w', encoding='shift_jis') as f:

# 修正後 (v2.10.0)  
with open(str(test_code_path), 'w', encoding='utf-8') as f:
```

## 🔧 技術的詳細

### エンコーディング処理の改善
1. **読み込み時**: `utils.py`のread_file()関数で自動検出（既存機能）
   - UTF-8, CP932, Shift-JIS, EUC-JP, ISO-2022-JP, UTF-16, Latin-1の順で試行
   
2. **書き込み時**: すべてUTF-8に統一
   - `TestCode.save()`: UTF-8（既存）
   - スタンドアロンモード: UTF-8（v2.10.0で修正）

### 対応文字コード
- 入力: 自動検出（複数のエンコーディングに対応）
- 出力: UTF-8固定

## 📊 互換性

### 後方互換性
- v2.9.0で生成されたプロジェクトとの完全な互換性
- 既存のテストケースはすべて動作

### 前方互換性
- UTF-8で生成されたファイルは、最新のIDEやエディタで正しく表示

## 🚀 使用方法

### 基本的な使用方法（変更なし）
```bash
python3 main.py -i input.c -f target_function -o output/
```

### 日本語コメントを含むファイルの処理
```bash
# 入力ファイルのエンコーディングは自動検出
# 出力は常にUTF-8
python3 main.py -i japanese_comments.c -f function_name -o output/
```

## 📝 既知の問題

現時点で既知の問題はありません。

## 🔄 アップグレード方法

```bash
# 1. 新バージョンを展開
tar -xzf AutoUniTestGen_v2_10_0.tar.gz

# 2. バージョン確認
cat AutoUniTestGen_v2_10_0/VERSION
# 出力: 2.10.0
```

## ✅ テスト結果

### 動作確認済み
- ✅ 単純な構造体
- ✅ 2階層ネスト構造体
- ✅ 3階層ネスト構造体
- ✅ ビットフィールド構造体
- ✅ 日本語コメントを含むファイル（NEW）

## 📊 変更ファイル

| ファイル | 変更内容 |
|----------|----------|
| `src/c_test_auto_generator.py` | 218行目のエンコーディングをUTF-8に変更 |
| `VERSION` | 2.9.0 → 2.10.0 |
| `RELEASE_NOTES_v2_10_0.md` | 新規作成 |

## 🙏 謝辞

ユーザーからのフィードバックにより、日本語コメントの文字化け問題を発見し修正することができました。

## 📞 サポート

問題や要望がありましたら、GitHubのIssueでお知らせください。

---

**次期バージョン予定**: v2.11.0
- ポインタメンバーのアサーション生成
- 配列メンバーのアサーション生成
- 共用体（union）のサポート
