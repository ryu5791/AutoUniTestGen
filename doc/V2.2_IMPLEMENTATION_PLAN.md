# AutoUniTestGen v2.2 å®Ÿè£…è¨ˆç”»æ›¸

**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: v2.2  
**ä½œæˆæ—¥**: 2025-11-09  
**ç›®æ¨™**: å‹å®šç¾©ãƒ»å¤‰æ•°å®£è¨€ã®è‡ªå‹•ç”Ÿæˆæ©Ÿèƒ½ã®å®Ÿè£…

---

## ğŸ¯ v2.2ã®ç›®æ¨™

v2.1ã§è§£æ¶ˆã—ãŸæ§‹æ–‡ã‚¨ãƒ©ãƒ¼ï¼ˆã‚»ãƒŸã‚³ãƒ­ãƒ³ä½ç½®ã€ASSERTæ¬ è½ï¼‰ã«ç¶šãã€v2.2ã§ã¯**å‹å®šç¾©ã¨å¤‰æ•°å®£è¨€ã®è‡ªå‹•ç”Ÿæˆ**ã‚’å®Ÿè£…ã—ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€ç”Ÿæˆã•ã‚ŒãŸãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ãŒã‚³ãƒ”ãƒ¼&ãƒšãƒ¼ã‚¹ãƒˆãªã—ã§å³åº§ã«ãƒ“ãƒ«ãƒ‰å¯èƒ½ã«ãªã‚Šã¾ã™ã€‚

### ç¾åœ¨ã®å•é¡Œç‚¹

ç”Ÿæˆã•ã‚ŒãŸãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã«ã¯ä»¥ä¸‹ã®ã‚ˆã†ãª **ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼ã‚³ãƒ¡ãƒ³ãƒˆ** ãŒå«ã¾ã‚Œã¦ã„ã¾ã™ï¼š

```c
// ===== ãƒ†ã‚¹ãƒˆå¯¾è±¡é–¢æ•°ã§ä½¿ç”¨ã•ã‚Œã‚‹å‹å®šç¾© =====
// typedef enum { ... } MyEnum;

// ===== å¤–éƒ¨å¤‰æ•°ï¼ˆãƒ†ã‚¹ãƒˆå¯¾è±¡é–¢æ•°ã§ä½¿ç”¨ï¼‰ =====
// extern int global_var;
```

ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯æ‰‹å‹•ã§å…ƒã®ã‚½ãƒ¼ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰å‹å®šç¾©ã‚„å¤‰æ•°å®£è¨€ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

### v2.2ã§ã®è§£æ±º

å…ƒã®ã‚½ãƒ¼ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ä»¥ä¸‹ã‚’**è‡ªå‹•æŠ½å‡º**ã—ã€ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰å†…ã«ç”Ÿæˆï¼š

1. **å‹å®šç¾©ï¼ˆtypedefï¼‰ã®è‡ªå‹•æŠ½å‡ºãƒ»ç”Ÿæˆ**
   - `typedef struct { ... } MyStruct;`
   - `typedef union { ... } MyUnion;`
   - `typedef enum { ... } MyEnum;`
   - åŸºæœ¬å‹ã®typedefï¼ˆ`typedef uint8_t BYTE;`ï¼‰

2. **å¤‰æ•°å®£è¨€ã®è‡ªå‹•æŠ½å‡ºãƒ»ç”Ÿæˆ**
   - ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°ã®`extern`å®£è¨€
   - ãƒ†ã‚¹ãƒˆå¯¾è±¡é–¢æ•°ã§ä½¿ç”¨ã•ã‚Œã‚‹å¤‰æ•°
   - æ¡ä»¶å¼ã§ä½¿ç”¨ã•ã‚Œã‚‹å¤‰æ•°

3. **ä¾å­˜é–¢ä¿‚ã®è§£æ±º**
   - å‹å®šç¾©ã®ä¾å­˜é †åºã‚’è‡ªå‹•è§£æ±º
   - ãƒã‚¹ãƒˆã—ãŸå‹å®šç¾©ã¸ã®å¯¾å¿œ

---

## ğŸ“‹ å®Ÿè£…ã™ã‚‹æ©Ÿèƒ½

### æ©Ÿèƒ½1: TypedefExtractorï¼ˆå‹å®šç¾©æŠ½å‡ºå™¨ï¼‰

**ç›®çš„**: Cè¨€èªã‚½ãƒ¼ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰å‹å®šç¾©ã‚’æŠ½å‡º

**ä¸»è¦æ©Ÿèƒ½**:
- `typedef struct` ã®æŠ½å‡º
- `typedef union` ã®æŠ½å‡º
- `typedef enum` ã®æŠ½å‡º
- åŸºæœ¬å‹ã®typedefã®æŠ½å‡º
- ãƒã‚¹ãƒˆã—ãŸå‹å®šç¾©ã®æ¤œå‡º
- ä¾å­˜é–¢ä¿‚ã®è§£æ

**å‡ºåŠ›**:
```python
{
    'name': 'Utx68',
    'type': 'union',
    'definition': 'typedef union { ... } Utx68;',
    'dependencies': [],  # ä¾å­˜ã™ã‚‹ä»–ã®typedefåã®ãƒªã‚¹ãƒˆ
    'line_number': 23
}
```

### æ©Ÿèƒ½2: VariableDeclExtractorï¼ˆå¤‰æ•°å®£è¨€æŠ½å‡ºå™¨ï¼‰

**ç›®çš„**: ãƒ†ã‚¹ãƒˆå¯¾è±¡é–¢æ•°ã§ä½¿ç”¨ã•ã‚Œã‚‹å¤‰æ•°å®£è¨€ã‚’æŠ½å‡º

**ä¸»è¦æ©Ÿèƒ½**:
- ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°ã®æŠ½å‡º
- `extern`å®£è¨€ãŒå¿…è¦ãªå¤‰æ•°ã®ç‰¹å®š
- æ¡ä»¶å¼ã§ä½¿ç”¨ã•ã‚Œã‚‹å¤‰æ•°ã®æŠ½å‡º
- å¤‰æ•°ã®å‹æƒ…å ±ã®å–å¾—

**å‡ºåŠ›**:
```python
{
    'name': 'Utm10',
    'type': 'uint8_t',
    'is_extern': True,
    'definition': 'extern uint8_t Utm10;'
}
```

### æ©Ÿèƒ½3: DependencyResolverï¼ˆä¾å­˜é–¢ä¿‚è§£æ±ºå™¨ï¼‰

**ç›®çš„**: å‹å®šç¾©ã®ä¾å­˜é–¢ä¿‚ã‚’è§£æ±ºã—ã€æ­£ã—ã„é †åºã§ä¸¦ã¹ã‚‹

**ä¸»è¦æ©Ÿèƒ½**:
- ãƒˆãƒãƒ­ã‚¸ã‚«ãƒ«ã‚½ãƒ¼ãƒˆã«ã‚ˆã‚‹é †åºæ±ºå®š
- å¾ªç’°ä¾å­˜ã®æ¤œå‡º
- å‰æ–¹å®£è¨€ã®ç”Ÿæˆï¼ˆå¿…è¦ã«å¿œã˜ã¦ï¼‰

**ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ **:
```python
# ä¾‹: Utx50ã¯Utx68ã«ä¾å­˜
# Utx68ã‚’å…ˆã«å®šç¾©ã™ã‚‹å¿…è¦ãŒã‚ã‚‹
dependencies = {
    'Utx50': ['Utx68'],
    'Utx68': [],
    'Utx87': []
}
# ã‚½ãƒ¼ãƒˆçµæœ: ['Utx68', 'Utx87', 'Utx50']
```

### æ©Ÿèƒ½4: CodeGeneratoræ‹¡å¼µ

**ç›®çš„**: æŠ½å‡ºã—ãŸå‹å®šç¾©ãƒ»å¤‰æ•°å®£è¨€ã‚’ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã«æŒ¿å…¥

**ä¿®æ­£ç®‡æ‰€**:
- `src/test_generator/unity_test_generator.py`
  - `_generate_header()` ãƒ¡ã‚½ãƒƒãƒ‰ã®æ‹¡å¼µ
  - å‹å®šç¾©ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®è‡ªå‹•ç”Ÿæˆ
  - å¤‰æ•°å®£è¨€ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®è‡ªå‹•ç”Ÿæˆ

**ç”Ÿæˆã‚³ãƒ¼ãƒ‰ä¾‹**:
```c
// ===== ãƒ†ã‚¹ãƒˆå¯¾è±¡é–¢æ•°ã§ä½¿ç”¨ã•ã‚Œã‚‹å‹å®šç¾© =====
typedef union {
    uint16_t Utm22;
    uint8_t Utm92[2];
    struct {
        uint8_t Utm94 : 1;
        // ...
    } Utx84;
} Utx68;

typedef union {
    uint8_t Utm92[8];
    struct {
        uint8_t Utm93;
        Utx68 Utx89;
        uint8_t Utm110[5];
    } Utm1;
} Utx50;

// ===== å¤–éƒ¨å¤‰æ•°ï¼ˆãƒ†ã‚¹ãƒˆå¯¾è±¡é–¢æ•°ã§ä½¿ç”¨ï¼‰ =====
extern uint8_t Utm10;
extern uint8_t Utm11;
```

---

## ğŸ—‚ï¸ æ–°è¦ãƒ•ã‚¡ã‚¤ãƒ«

### 1. `src/parser/typedef_extractor.py`

```python
"""
TypedefExtractorãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«

Cè¨€èªã‚½ãƒ¼ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰å‹å®šç¾©ã‚’æŠ½å‡º
"""

class TypedefInfo:
    """å‹å®šç¾©æƒ…å ±"""
    def __init__(self, name, typedef_type, definition, dependencies, line_number):
        self.name = name
        self.typedef_type = typedef_type  # 'struct', 'union', 'enum', 'basic'
        self.definition = definition
        self.dependencies = dependencies
        self.line_number = line_number

class TypedefExtractor:
    """å‹å®šç¾©æŠ½å‡ºå™¨"""
    
    def extract_typedefs(self, ast, source_code):
        """
        ASTã‹ã‚‰å‹å®šç¾©ã‚’æŠ½å‡º
        
        Args:
            ast: pycparserã®AST
            source_code: å…ƒã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰
        
        Returns:
            List[TypedefInfo]: å‹å®šç¾©æƒ…å ±ã®ãƒªã‚¹ãƒˆ
        """
        pass
    
    def _extract_typedef_struct(self, node):
        """typedef struct ã‚’æŠ½å‡º"""
        pass
    
    def _extract_typedef_union(self, node):
        """typedef union ã‚’æŠ½å‡º"""
        pass
    
    def _extract_typedef_enum(self, node):
        """typedef enum ã‚’æŠ½å‡º"""
        pass
    
    def _find_dependencies(self, definition):
        """å‹å®šç¾©å†…ã®ä¾å­˜é–¢ä¿‚ã‚’æ¤œå‡º"""
        pass
```

### 2. `src/parser/variable_decl_extractor.py`

```python
"""
VariableDeclExtractorãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«

ãƒ†ã‚¹ãƒˆå¯¾è±¡é–¢æ•°ã§ä½¿ç”¨ã•ã‚Œã‚‹å¤‰æ•°å®£è¨€ã‚’æŠ½å‡º
"""

class VariableDeclInfo:
    """å¤‰æ•°å®£è¨€æƒ…å ±"""
    def __init__(self, name, var_type, is_extern, definition):
        self.name = name
        self.var_type = var_type
        self.is_extern = is_extern
        self.definition = definition

class VariableDeclExtractor:
    """å¤‰æ•°å®£è¨€æŠ½å‡ºå™¨"""
    
    def extract_variables(self, ast, function_name, conditions):
        """
        é–¢æ•°ã§ä½¿ç”¨ã•ã‚Œã‚‹å¤‰æ•°ã‚’æŠ½å‡º
        
        Args:
            ast: pycparserã®AST
            function_name: å¯¾è±¡é–¢æ•°å
            conditions: æ¡ä»¶å¼ã®ãƒªã‚¹ãƒˆ
        
        Returns:
            List[VariableDeclInfo]: å¤‰æ•°å®£è¨€æƒ…å ±ã®ãƒªã‚¹ãƒˆ
        """
        pass
    
    def _is_global_variable(self, var_name, ast):
        """ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°ã‹ã©ã†ã‹åˆ¤å®š"""
        pass
    
    def _get_variable_type(self, var_name, ast):
        """å¤‰æ•°ã®å‹ã‚’å–å¾—"""
        pass
```

### 3. `src/parser/dependency_resolver.py`

```python
"""
DependencyResolverãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«

å‹å®šç¾©ã®ä¾å­˜é–¢ä¿‚ã‚’è§£æ±º
"""

class DependencyResolver:
    """ä¾å­˜é–¢ä¿‚è§£æ±ºå™¨"""
    
    def resolve_order(self, typedefs):
        """
        å‹å®šç¾©ã‚’ä¾å­˜é–¢ä¿‚ã«åŸºã¥ã„ã¦ã‚½ãƒ¼ãƒˆ
        
        Args:
            typedefs: List[TypedefInfo]
        
        Returns:
            List[TypedefInfo]: ã‚½ãƒ¼ãƒˆæ¸ˆã¿ã®å‹å®šç¾©ãƒªã‚¹ãƒˆ
        
        Raises:
            CircularDependencyError: å¾ªç’°ä¾å­˜ãŒæ¤œå‡ºã•ã‚ŒãŸå ´åˆ
        """
        pass
    
    def _topological_sort(self, dependencies):
        """ãƒˆãƒãƒ­ã‚¸ã‚«ãƒ«ã‚½ãƒ¼ãƒˆ"""
        pass
    
    def _detect_circular_dependency(self, dependencies):
        """å¾ªç’°ä¾å­˜ã®æ¤œå‡º"""
        pass
```

---

## ğŸ”§ ä¿®æ­£ãƒ•ã‚¡ã‚¤ãƒ«

### 1. `src/parser/c_code_parser.py`

**è¿½åŠ æ©Ÿèƒ½**:
- `TypedefExtractor`ã®çµ±åˆ
- `VariableDeclExtractor`ã®çµ±åˆ
- `ParsedData`ã¸ã®å‹å®šç¾©æƒ…å ±ãƒ»å¤‰æ•°å®£è¨€æƒ…å ±ã®è¿½åŠ 

**ä¿®æ­£å†…å®¹**:
```python
from src.parser.typedef_extractor import TypedefExtractor
from src.parser.variable_decl_extractor import VariableDeclExtractor

class CCodeParser:
    def __init__(self):
        # æ—¢å­˜ã®åˆæœŸåŒ–
        self.typedef_extractor = TypedefExtractor()
        self.variable_extractor = VariableDeclExtractor()
    
    def parse(self, c_file_path, target_function=None):
        # æ—¢å­˜ã®å‡¦ç†
        
        # æ–°è¦: å‹å®šç¾©ã‚’æŠ½å‡º
        typedefs = self.typedef_extractor.extract_typedefs(ast, source_code)
        
        # æ–°è¦: å¤‰æ•°å®£è¨€ã‚’æŠ½å‡º
        variables = self.variable_extractor.extract_variables(
            ast, target_function, conditions
        )
        
        # ParsedDataã«è¿½åŠ 
        parsed_data.typedefs = typedefs
        parsed_data.variables = variables
        
        return parsed_data
```

### 2. `src/data_structures.py`

**è¿½åŠ ã‚¯ãƒ©ã‚¹**:
```python
@dataclass
class TypedefInfo:
    """å‹å®šç¾©æƒ…å ±"""
    name: str
    typedef_type: str  # 'struct', 'union', 'enum', 'basic'
    definition: str
    dependencies: List[str]
    line_number: int

@dataclass
class VariableDeclInfo:
    """å¤‰æ•°å®£è¨€æƒ…å ±"""
    name: str
    var_type: str
    is_extern: bool
    definition: str
```

**ä¿®æ­£ã‚¯ãƒ©ã‚¹**:
```python
@dataclass
class ParsedData:
    # æ—¢å­˜ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰
    function_name: str
    function_info: Optional[FunctionInfo]
    conditions: List[Condition]
    
    # æ–°è¦ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰
    typedefs: List[TypedefInfo] = field(default_factory=list)
    variables: List[VariableDeclInfo] = field(default_factory=list)
```

### 3. `src/test_generator/unity_test_generator.py`

**ä¿®æ­£ãƒ¡ã‚½ãƒƒãƒ‰**:
```python
def _generate_header(self, parsed_data: ParsedData) -> str:
    """
    ãƒ˜ãƒƒãƒ€ãƒ¼éƒ¨åˆ†ã‚’ç”Ÿæˆ
    
    v2.2ã§æ‹¡å¼µ: å‹å®šç¾©ã¨å¤‰æ•°å®£è¨€ã‚’è‡ªå‹•ç”Ÿæˆ
    """
    lines = []
    
    # æ—¢å­˜ã®ã‚¤ãƒ³ã‚¯ãƒ«ãƒ¼ãƒ‰
    lines.append("#include \"unity.h\"")
    # ...
    
    # æ–°è¦: å‹å®šç¾©ã‚»ã‚¯ã‚·ãƒ§ãƒ³
    if parsed_data.typedefs:
        lines.append("")
        lines.append("// ===== ãƒ†ã‚¹ãƒˆå¯¾è±¡é–¢æ•°ã§ä½¿ç”¨ã•ã‚Œã‚‹å‹å®šç¾© =====")
        
        # ä¾å­˜é–¢ä¿‚ã‚’è§£æ±ºã—ã¦ã‚½ãƒ¼ãƒˆ
        resolver = DependencyResolver()
        sorted_typedefs = resolver.resolve_order(parsed_data.typedefs)
        
        for typedef in sorted_typedefs:
            lines.append(typedef.definition)
            lines.append("")
    else:
        # å¾“æ¥é€šã‚Šãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼
        lines.append("// ===== ãƒ†ã‚¹ãƒˆå¯¾è±¡é–¢æ•°ã§ä½¿ç”¨ã•ã‚Œã‚‹å‹å®šç¾© =====")
        lines.append("// typedef enum { ... } MyEnum;")
    
    # æ–°è¦: å¤‰æ•°å®£è¨€ã‚»ã‚¯ã‚·ãƒ§ãƒ³
    if parsed_data.variables:
        lines.append("")
        lines.append("// ===== å¤–éƒ¨å¤‰æ•°ï¼ˆãƒ†ã‚¹ãƒˆå¯¾è±¡é–¢æ•°ã§ä½¿ç”¨ï¼‰ =====")
        for var in parsed_data.variables:
            if var.is_extern:
                lines.append(var.definition)
    else:
        # å¾“æ¥é€šã‚Šãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼
        lines.append("// ===== å¤–éƒ¨å¤‰æ•°ï¼ˆãƒ†ã‚¹ãƒˆå¯¾è±¡é–¢æ•°ã§ä½¿ç”¨ï¼‰ =====")
        lines.append("// extern int global_var;")
    
    return '\n'.join(lines)
```

---

## ğŸ“ˆ å®Ÿè£…ã®å„ªå…ˆé †ä½

### Phase 1: TypedefExtractorå®Ÿè£…ï¼ˆ1-2æ™‚é–“ï¼‰
1. `typedef_extractor.py`ã®ä½œæˆ
2. åŸºæœ¬çš„ãªå‹å®šç¾©ã®æŠ½å‡ºï¼ˆstruct, union, enumï¼‰
3. å˜ä½“ãƒ†ã‚¹ãƒˆã®ä½œæˆ
4. çµ±åˆãƒ†ã‚¹ãƒˆã§ã®æ¤œè¨¼

### Phase 2: VariableDeclExtractorå®Ÿè£…ï¼ˆ1æ™‚é–“ï¼‰
1. `variable_decl_extractor.py`ã®ä½œæˆ
2. ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°ã®æŠ½å‡º
3. å˜ä½“ãƒ†ã‚¹ãƒˆã®ä½œæˆ

### Phase 3: DependencyResolverå®Ÿè£…ï¼ˆ1æ™‚é–“ï¼‰
1. `dependency_resolver.py`ã®ä½œæˆ
2. ãƒˆãƒãƒ­ã‚¸ã‚«ãƒ«ã‚½ãƒ¼ãƒˆã®å®Ÿè£…
3. å¾ªç’°ä¾å­˜ã®æ¤œå‡º
4. å˜ä½“ãƒ†ã‚¹ãƒˆã®ä½œæˆ

### Phase 4: çµ±åˆï¼ˆ1æ™‚é–“ï¼‰
1. `c_code_parser.py`ã®ä¿®æ­£
2. `data_structures.py`ã®æ‹¡å¼µ
3. `unity_test_generator.py`ã®ä¿®æ­£
4. çµ±åˆãƒ†ã‚¹ãƒˆã®å®Ÿæ–½

### Phase 5: ãƒ†ã‚¹ãƒˆãƒ»æ¤œè¨¼ï¼ˆ1æ™‚é–“ï¼‰
1. `/mnt/project/22_é›£èª­åŒ–_obfuscated.c`ã§ã®å®Ÿæ©Ÿãƒ†ã‚¹ãƒˆ
2. ç”Ÿæˆã•ã‚ŒãŸã‚³ãƒ¼ãƒ‰ã®ãƒ“ãƒ«ãƒ‰ç¢ºèª
3. ãƒã‚°ä¿®æ­£
4. ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°

**åˆè¨ˆäºˆæƒ³æ™‚é–“: 5-6æ™‚é–“**

---

## ğŸ§ª ãƒ†ã‚¹ãƒˆè¨ˆç”»

### å˜ä½“ãƒ†ã‚¹ãƒˆ

#### test_typedef_extractor.py
```python
def test_extract_typedef_struct():
    """typedef struct ã®æŠ½å‡ºãƒ†ã‚¹ãƒˆ"""
    pass

def test_extract_typedef_union():
    """typedef union ã®æŠ½å‡ºãƒ†ã‚¹ãƒˆ"""
    pass

def test_extract_nested_typedef():
    """ãƒã‚¹ãƒˆã—ãŸå‹å®šç¾©ã®æŠ½å‡ºãƒ†ã‚¹ãƒˆ"""
    pass

def test_find_dependencies():
    """ä¾å­˜é–¢ä¿‚ã®æ¤œå‡ºãƒ†ã‚¹ãƒˆ"""
    pass
```

#### test_variable_decl_extractor.py
```python
def test_extract_global_variables():
    """ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°ã®æŠ½å‡ºãƒ†ã‚¹ãƒˆ"""
    pass

def test_determine_extern():
    """externå®£è¨€ãŒå¿…è¦ãªå¤‰æ•°ã®åˆ¤å®šãƒ†ã‚¹ãƒˆ"""
    pass
```

#### test_dependency_resolver.py
```python
def test_topological_sort():
    """ãƒˆãƒãƒ­ã‚¸ã‚«ãƒ«ã‚½ãƒ¼ãƒˆã®ãƒ†ã‚¹ãƒˆ"""
    pass

def test_circular_dependency_detection():
    """å¾ªç’°ä¾å­˜ã®æ¤œå‡ºãƒ†ã‚¹ãƒˆ"""
    pass
```

### çµ±åˆãƒ†ã‚¹ãƒˆ

#### test_v2_2_integration.py
```python
def test_typedef_generation():
    """å‹å®šç¾©ã®è‡ªå‹•ç”Ÿæˆãƒ†ã‚¹ãƒˆ"""
    # 22_é›£èª­åŒ–_obfuscated.c ã‚’ä½¿ç”¨
    # ç”Ÿæˆã•ã‚ŒãŸãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã«å‹å®šç¾©ãŒå«ã¾ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
    pass

def test_variable_generation():
    """å¤‰æ•°å®£è¨€ã®è‡ªå‹•ç”Ÿæˆãƒ†ã‚¹ãƒˆ"""
    # ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°ã®externå®£è¨€ãŒç”Ÿæˆã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
    pass

def test_full_workflow():
    """ã‚¨ãƒ³ãƒ‰ãƒ„ãƒ¼ã‚¨ãƒ³ãƒ‰ãƒ†ã‚¹ãƒˆ"""
    # ç”Ÿæˆã•ã‚ŒãŸã‚³ãƒ¼ãƒ‰ãŒã‚³ãƒ³ãƒ‘ã‚¤ãƒ«å¯èƒ½ã§ã‚ã‚‹ã“ã¨ã‚’ç¢ºèª
    pass
```

---

## ğŸ“Š æˆåŠŸåŸºæº–

v2.2ã¯ä»¥ä¸‹ã®æ¡ä»¶ã‚’æº€ãŸã›ã°æˆåŠŸã¨ã—ã¾ã™ï¼š

### å¿…é ˆæ¡ä»¶ âœ…
1. **å‹å®šç¾©ã®è‡ªå‹•æŠ½å‡º**: `typedef struct/union/enum` ã‚’æ­£ã—ãæŠ½å‡ºã§ãã‚‹
2. **å¤‰æ•°å®£è¨€ã®è‡ªå‹•æŠ½å‡º**: ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°ã‚’æ­£ã—ãæŠ½å‡ºã§ãã‚‹
3. **ä¾å­˜é–¢ä¿‚ã®è§£æ±º**: å‹å®šç¾©ã®ä¾å­˜é †åºã‚’æ­£ã—ãè§£æ±ºã§ãã‚‹
4. **ã‚³ãƒ¼ãƒ‰ç”Ÿæˆ**: æŠ½å‡ºã—ãŸæƒ…å ±ã‚’ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã«æ­£ã—ãæŒ¿å…¥ã§ãã‚‹
5. **çµ±åˆãƒ†ã‚¹ãƒˆæˆåŠŸ**: `test_v2_2_integration.py` ãŒå…¨ã¦æˆåŠŸã™ã‚‹

### æœ›ã¾ã—ã„æ¡ä»¶ ğŸ¯
1. **ãƒ“ãƒ«ãƒ‰å¯èƒ½**: ç”Ÿæˆã•ã‚ŒãŸã‚³ãƒ¼ãƒ‰ãŒå³åº§ã«ãƒ“ãƒ«ãƒ‰å¯èƒ½ï¼ˆæ‰‹å‹•ä¿®æ­£ä¸è¦ï¼‰
2. **è¤‡é›‘ãªå‹å®šç¾©å¯¾å¿œ**: ãƒã‚¹ãƒˆã—ãŸå‹å®šç¾©ã€ãƒ“ãƒƒãƒˆãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãªã©ã«å¯¾å¿œ
3. **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹**: å¤§è¦æ¨¡ãƒ•ã‚¡ã‚¤ãƒ«ã§ã‚‚é«˜é€Ÿå‹•ä½œï¼ˆ2000è¡Œä»¥å†…ã§1ç§’ä»¥å†…ï¼‰

---

## ğŸ“ ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

### æ›´æ–°ã™ã‚‹ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

1. **README.md**
   - v2.2ã®æ–°æ©Ÿèƒ½ã‚’è¿½åŠ 
   - ä½¿ç”¨ä¾‹ã®æ›´æ–°

2. **RELEASE_NOTES_v2.2.md**ï¼ˆæ–°è¦ä½œæˆï¼‰
   - v2.2ã§ã®å¤‰æ›´å†…å®¹
   - ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã‚¬ã‚¤ãƒ‰

3. **USER_GUIDE.md**
   - å‹å®šç¾©ãƒ»å¤‰æ•°å®£è¨€ã®è‡ªå‹•ç”Ÿæˆæ©Ÿèƒ½ã®èª¬æ˜

---

## ğŸš€ å®Ÿè£…é–‹å§‹

æº–å‚™ãŒæ•´ã„ã¾ã—ãŸã€‚Phase 1ã‹ã‚‰é †ã«å®Ÿè£…ã‚’é–‹å§‹ã—ã¾ã™ã€‚

**æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—**: `src/parser/typedef_extractor.py` ã®å®Ÿè£…

---

**ä½œæˆè€…**: Claude  
**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: v2.2 è¨ˆç”»æ›¸  
**çŠ¶æ…‹**: ãƒ¬ãƒ“ãƒ¥ãƒ¼å®Œäº†ã€å®Ÿè£…æº–å‚™å®Œäº†
