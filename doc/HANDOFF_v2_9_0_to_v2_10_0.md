# AutoUniTestGen v2.9.0 â†’ v2.10.0 å¼•ç¶™ãè³‡æ–™

**ä½œæˆæ—¥**: 2025-11-21  
**ç¾åœ¨ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: v2.9.0  
**æ¬¡æœŸãƒãƒ¼ã‚¸ãƒ§ãƒ³**: v2.10.0  
**ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆçŠ¶æ…‹**: âœ… ãƒã‚¹ãƒˆæ§‹é€ ä½“å¯¾å¿œå®Œäº†

---

## ğŸ“‹ ã‚¨ã‚°ã‚¼ã‚¯ãƒ†ã‚£ãƒ–ã‚µãƒãƒªãƒ¼

### é”æˆäº‹é …
âœ… **2ãƒ‘ã‚¹å‡¦ç†ã«ã‚ˆã‚‹å‹è§£æ±º** - æ§‹é€ ä½“å®šç¾©ã®ç›¸äº’å‚ç…§ã‚’å®Œå…¨ã«è§£æ±º  
âœ… **å¤šéšå±¤ãƒã‚¹ãƒˆæ§‹é€ ä½“å¯¾å¿œ** - 3éšå±¤ä»¥ä¸Šã®ãƒã‚¹ãƒˆã‚‚æ­£ã—ãå±•é–‹  
âœ… **å®Œå…¨ãªã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³ç”Ÿæˆ** - `result.info.position.x`ã®ã‚ˆã†ãªæ·±ã„éšå±¤ã‚‚å¯¾å¿œ

### æ¬¡æœŸæ”¹å–„å€™è£œ
- ãƒã‚¤ãƒ³ã‚¿ãƒ¡ãƒ³ãƒãƒ¼ã®è©³ç´°ãªã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³
- é…åˆ—ãƒ¡ãƒ³ãƒãƒ¼ã®è©³ç´°ãªã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³
- å…±ç”¨ä½“ï¼ˆunionï¼‰ã®ã‚µãƒãƒ¼ãƒˆ
- å¾ªç’°å‚ç…§ã™ã‚‹æ§‹é€ ä½“ã®å¯¾å¿œ

---

## ğŸš€ ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆï¼ˆæ¬¡å›ãƒãƒ£ãƒƒãƒˆç”¨ï¼‰

```bash
# 1. ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ã‚’å±•é–‹ï¼ˆå­˜åœ¨ã™ã‚‹å ´åˆï¼‰
cd /home/claude
tar -xzf AutoUniTestGen_v2_9_0.tar.gz

# 2. ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç¢ºèª
cat AutoUniTestGen_v2_9_0/VERSION
# å‡ºåŠ›: 2.9.0

# 3. å‹•ä½œç¢ºèªï¼ˆ2éšå±¤ãƒã‚¹ãƒˆï¼‰âœ…
cd AutoUniTestGen_v2_9_0
python3 main.py -i test_cases/test_nested_struct.c -f get_pixel -o output/test1

# 4. å‹•ä½œç¢ºèªï¼ˆ3éšå±¤ãƒã‚¹ãƒˆï¼‰âœ…
python3 main.py -i test_cases/test_deep_nested_struct.c -f get_display_element -o output/test2
```

---

## ğŸ“Š v2.9.0ã®å®Ÿè£…å†…å®¹

### ä¸»è¦ãªå¤‰æ›´

#### 1. 2ãƒ‘ã‚¹å‡¦ç†ã®å®Ÿè£…
**ãƒ•ã‚¡ã‚¤ãƒ«**: `src/parser/typedef_extractor.py`  
**ãƒ¡ã‚½ãƒƒãƒ‰**: `extract_struct_definitions()`

```python
# ç¬¬1ãƒ‘ã‚¹: ã™ã¹ã¦ã®æ§‹é€ ä½“å®šç¾©ã‚’åé›†
for node in self._walk_ast(ast):
    if self._is_typedef_struct(node):
        struct_def = self._parse_typedef_struct(node, resolve_types=False)
        struct_defs.append(struct_def)

# æ§‹é€ ä½“ãƒãƒƒãƒ—ã‚’ä½œæˆ
struct_map = {s.name: s for s in struct_defs}

# ç¬¬2ãƒ‘ã‚¹: å‹å‚ç…§ã‚’è§£æ±º
for struct_def in struct_defs:
    for member in struct_def.members:
        if member.type in struct_map:
            member.nested_struct = struct_map[member.type]
```

#### 2. æ­£ã—ãå‹•ä½œã™ã‚‹æ©Ÿèƒ½

| æ©Ÿèƒ½ | çŠ¶æ…‹ | ãƒ†ã‚¹ãƒˆæ¸ˆã¿ |
|------|------|----------|
| å˜ç´”ãªæ§‹é€ ä½“ | âœ… | test_simple_struct.c |
| 2éšå±¤ãƒã‚¹ãƒˆ | âœ… | test_nested_struct.c |
| 3éšå±¤ãƒã‚¹ãƒˆ | âœ… | test_deep_nested_struct.c |
| ãƒ“ãƒƒãƒˆãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ | âœ… | test_bitfield_struct.c |
| æ§‹é€ ä½“é…åˆ—ãƒ¡ãƒ³ãƒãƒ¼ | âš ï¸ TODOã‚³ãƒ¡ãƒ³ãƒˆç”Ÿæˆ | - |
| ãƒã‚¤ãƒ³ã‚¿ãƒ¡ãƒ³ãƒãƒ¼ | âš ï¸ TODOã‚³ãƒ¡ãƒ³ãƒˆç”Ÿæˆ | - |

---

## ğŸ”§ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã®ç¾çŠ¶

### ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼ï¼ˆv2.9.0ï¼‰
```
[Cã‚½ãƒ¼ã‚¹] 
    â†“
[å‰å‡¦ç†ãƒ»ASTæ§‹ç¯‰]
    â†“
[ç¬¬1ãƒ‘ã‚¹: æ§‹é€ ä½“å®šç¾©åé›†] â† v2.9.0ã§è¿½åŠ 
    â†“
[æ§‹é€ ä½“ãƒãƒƒãƒ—ä½œæˆ] â† v2.9.0ã§è¿½åŠ 
    â†“
[ç¬¬2ãƒ‘ã‚¹: å‹å‚ç…§è§£æ±º] â† v2.9.0ã§è¿½åŠ 
    â†“
[ParsedDataï¼ˆæ§‹é€ ä½“å®šç¾©å«ã‚€ï¼‰]
    â†“
[TestFunctionGenerator]
    â†“
[ãƒã‚¹ãƒˆãƒ¡ãƒ³ãƒãƒ¼å±•é–‹ãƒ»ã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³ç”Ÿæˆ]
```

### ã‚¯ãƒ©ã‚¹é–¢ä¿‚
```
TypedefExtractor
â”œâ”€â”€ extract_struct_definitions() â† 2ãƒ‘ã‚¹å‡¦ç†ã«æ”¹è‰¯
â”œâ”€â”€ _parse_typedef_struct(resolve_types) â† ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿è¿½åŠ 
â””â”€â”€ _parse_direct_struct(resolve_types) â† ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿è¿½åŠ 

StructDefinition
â”œâ”€â”€ get_all_members_flat() â† å†å¸°çš„å±•é–‹ï¼ˆæ­£å¸¸å‹•ä½œï¼‰
â””â”€â”€ members: List[StructMember]
    â””â”€â”€ nested_struct â† ç¬¬2ãƒ‘ã‚¹ã§è¨­å®š

TestFunctionGenerator
â””â”€â”€ _generate_struct_assertions()
    â””â”€â”€ struct_def.get_all_members_flat()ã‚’ä½¿ç”¨
```

---

## ğŸ“ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ 

```
AutoUniTestGen_v2_9_0/
â”œâ”€â”€ VERSION (2.9.0)
â”œâ”€â”€ main.py
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ data_structures.py      â† StructDefinition, StructMember
â”‚   â”œâ”€â”€ parser/
â”‚   â”‚   â”œâ”€â”€ c_code_parser.py    
â”‚   â”‚   â”œâ”€â”€ typedef_extractor.py â† âœ… 2ãƒ‘ã‚¹å‡¦ç†å®Ÿè£…æ¸ˆã¿
â”‚   â”‚   â””â”€â”€ ...
â”‚   â””â”€â”€ test_generator/
â”‚       â”œâ”€â”€ test_function_generator.py â† âœ… ãƒã‚¹ãƒˆå±•é–‹å¯¾å¿œæ¸ˆã¿
â”‚       â””â”€â”€ ...
â”œâ”€â”€ test_cases/
â”‚   â”œâ”€â”€ test_simple_struct.c    â† âœ… å‹•ä½œç¢ºèªOK
â”‚   â”œâ”€â”€ test_nested_struct.c    â† âœ… å‹•ä½œç¢ºèªOK
â”‚   â”œâ”€â”€ test_deep_nested_struct.c â† âœ… å‹•ä½œç¢ºèªOKï¼ˆv2.9.0ã§è¿½åŠ ï¼‰
â”‚   â””â”€â”€ test_bitfield_struct.c  â† âœ… å‹•ä½œç¢ºèªOK
â””â”€â”€ output/                      â† ç”Ÿæˆçµæœ
```

---

## ğŸ¯ v2.10.0ã¸ã®ææ¡ˆ

### å„ªå…ˆåº¦ï¼šé«˜
1. **ãƒã‚¤ãƒ³ã‚¿ãƒ¡ãƒ³ãƒãƒ¼ã®ã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³ç”Ÿæˆ**
   - NULLãƒã‚§ãƒƒã‚¯ã®è¿½åŠ 
   - ãƒã‚¤ãƒ³ãƒˆå…ˆã®å€¤ã®æ¤œè¨¼
   - ä¾‹: `TEST_ASSERT_NOT_NULL(result.ptr);`

2. **é…åˆ—ãƒ¡ãƒ³ãƒãƒ¼ã®ã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³ç”Ÿæˆ**
   - é…åˆ—è¦ç´ ã”ã¨ã®æ¤œè¨¼
   - ä¾‹: `TEST_ASSERT_EQUAL_UINT8_ARRAY(expected, result.array, SIZE);`

### å„ªå…ˆåº¦ï¼šä¸­
3. **å…±ç”¨ä½“ï¼ˆunionï¼‰ã®ã‚µãƒãƒ¼ãƒˆ**
   - unionãƒ¡ãƒ³ãƒãƒ¼ã®æ¤œå‡º
   - é©åˆ‡ãªã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³ç”Ÿæˆ

4. **å¾ªç’°å‚ç…§ã®æ¤œå‡ºã¨å‡¦ç†**
   - ç„¡é™ãƒ«ãƒ¼ãƒ—ã®é˜²æ­¢
   - è­¦å‘Šãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ç”Ÿæˆ

### å„ªå…ˆåº¦ï¼šä½
5. **é–¢æ•°ãƒã‚¤ãƒ³ã‚¿ãƒ¡ãƒ³ãƒãƒ¼ã®å¯¾å¿œ**
6. **å¯å¤‰é•·é…åˆ—ãƒ¡ãƒ³ãƒãƒ¼ã®å¯¾å¿œ**

---

## ğŸ’» ãƒ‡ãƒãƒƒã‚°ç”¨ã‚³ãƒãƒ³ãƒ‰

### æ§‹é€ ä½“å®šç¾©ã®ç¢ºèª
```bash
cd /home/claude/AutoUniTestGen_v2_9_0
python3 debug_struct_extraction.py
```

### ç‰¹å®šãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ†ã‚¹ãƒˆç”Ÿæˆ
```bash
python3 main.py -i test_cases/[ãƒ•ã‚¡ã‚¤ãƒ«å] -f [é–¢æ•°å] -o output/test
```

### ç”Ÿæˆã•ã‚ŒãŸã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³ã®ç¢ºèª
```bash
grep -A 20 "TEST_ASSERT" output/test/*.c
```

---

## âš¡ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### å•é¡Œ: æ§‹é€ ä½“ãƒ¡ãƒ³ãƒãƒ¼ãŒå±•é–‹ã•ã‚Œãªã„
**ç¢ºèª**: `nested_struct`ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹ã‹
```python
for member in struct_def.members:
    print(f"{member.name}: nested_struct={member.nested_struct}")
```

### å•é¡Œ: å‹ãŒèªè­˜ã•ã‚Œãªã„
**ç¢ºèª**: æ§‹é€ ä½“ãƒãƒƒãƒ—ã«å«ã¾ã‚Œã¦ã„ã‚‹ã‹
```python
struct_map = {s.name: s for s in parsed_data.struct_definitions}
print(f"æ§‹é€ ä½“ãƒãƒƒãƒ—: {list(struct_map.keys())}")
```

---

## âœ… ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

### v2.9.0ã®å®Œæˆåº¦
- [x] 2ãƒ‘ã‚¹å‡¦ç†ã®å®Ÿè£…
- [x] ãƒã‚¹ãƒˆæ§‹é€ ä½“ã®å®Œå…¨å±•é–‹
- [x] 3éšå±¤ä»¥ä¸Šã®ãƒã‚¹ãƒˆå¯¾å¿œ
- [x] ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã§ã®å‹•ä½œç¢ºèª
- [x] ãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ãƒˆä½œæˆ
- [x] å¼•ç¶™ãè³‡æ–™ä½œæˆ

### v2.10.0ã¸ã®æº–å‚™
- [ ] ãƒã‚¤ãƒ³ã‚¿ãƒ¡ãƒ³ãƒãƒ¼å‡¦ç†ã®è¨­è¨ˆ
- [ ] é…åˆ—ãƒ¡ãƒ³ãƒãƒ¼å‡¦ç†ã®è¨­è¨ˆ
- [ ] unionå¯¾å¿œã®æ¤œè¨
- [ ] ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ¸¬å®š

---

## ğŸ“ æ¬¡å›ãƒãƒ£ãƒƒãƒˆé–‹å§‹æ™‚ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ

```
AutoUniTestGen v2.9.0ã®é–‹ç™ºã‚’ç¶šã‘ã¾ã™ã€‚
ç¾åœ¨ã€ãƒã‚¹ãƒˆæ§‹é€ ä½“ã®å®Œå…¨å±•é–‹ãŒå®Ÿè£…æ¸ˆã¿ã§ã™ã€‚

ã€é”æˆæ¸ˆã¿ã€‘
- 2ãƒ‘ã‚¹å‡¦ç†ã«ã‚ˆã‚‹å‹è§£æ±º âœ…
- 3éšå±¤ä»¥ä¸Šã®ãƒã‚¹ãƒˆæ§‹é€ ä½“å¯¾å¿œ âœ…

ã€æ¬¡ã®ã‚¿ã‚¹ã‚¯å€™è£œã€‘
1. ãƒã‚¤ãƒ³ã‚¿ãƒ¡ãƒ³ãƒãƒ¼ã®ã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³ç”Ÿæˆ
2. é…åˆ—ãƒ¡ãƒ³ãƒãƒ¼ã®ã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³ç”Ÿæˆ
3. å…±ç”¨ä½“ï¼ˆunionï¼‰ã®ã‚µãƒãƒ¼ãƒˆ

ã©ã®æ©Ÿèƒ½ã‹ã‚‰å®Ÿè£…ã—ã¾ã™ã‹ï¼Ÿ
```

---

**ä½œæˆè€…**: AutoUniTestGen Development Assistant  
**ä½œæˆæ—¥æ™‚**: 2025-11-21  
**æ¨å®šä½œæ¥­æ™‚é–“**: å„æ©Ÿèƒ½2-4æ™‚é–“  
**é›£æ˜“åº¦**: ä¸­  
**å„ªå…ˆåº¦**: ãƒã‚¤ãƒ³ã‚¿/é…åˆ—å¯¾å¿œã¯é«˜
