# AutoUniTestGen v2.3.4 リリースノート

## 🗓️ リリース日
2025年11月10日

## 🎯 概要
構造体メンバー比較の初期化コード生成バグを修正

## 🐛 バグ修正

### 1. 構造体メンバー比較の初期化コード生成問題を修正
**問題**: 構造体メンバー同士の比較（例：`Utx112.Utm10 != Utx104.Utm10`）で、初期化コードが誤って生成される問題がありました。

**症状**:
```c
// 誤った出力（v2.3.3以前）
(Utx112.Utm10 = 1;  // 左辺
Utx104.Utm10) = 0;  // 右辺（異なる値）
```

**修正後**:
```c
// 正しい出力（v2.3.4）
Utx112.Utm10 = 1;  // 左辺
Utx104.Utm10 = 0;  // 右辺（異なる値）
```

### 2. _validate_and_fix_init_codeメソッドの改善
- 構造体メンバーアクセス（`.`）やポインターアクセス（`->`）を含む変数名を適切に処理するよう修正
- 正規表現を改善し、複雑な識別子パターンに対応

**修正ファイル**:
- `src/test_generator/test_function_generator.py`
  - `_validate_and_fix_init_code`メソッドの正規表現を改善
  - 構造体メンバーアクセスの場合は追加の検証をスキップ

### 3. 関数呼び出し検出の堅牢性向上
- `_is_function_call`メソッドの検出精度を維持
- 構造体メンバーと関数呼び出しの区別を適切に処理

## ✅ テスト結果
以下のケースで正しく動作することを確認：
- `Utx112.Utm10 != Utx104.Utm10`（構造体メンバー同士の比較）
- `ptr->member != other->member`（ポインター経由のメンバーアクセス）
- `Utf12() != 0`（関数呼び出しの比較）

## 📝 注意事項
- 既存のテストコードとの後方互換性を維持
- 関数呼び出しに対するTODOコメント生成機能は引き続き動作

## 🔧 インストール/アップデート方法
```bash
# アーカイブを展開
tar -xzf AutoUniTestGen_v2_3_4.tar.gz
cd AutoUniTestGen

# 実行
python3 main.py -i your_file.c -f your_function -o output_dir
```

## 📊 影響範囲
- 構造体メンバーやポインターアクセスを含む条件式を持つすべてのテストケース
- 特に組み込みシステムのハードウェアレジスタアクセスコードで改善

## 🙏 謝辞
バグ報告をいただいたユーザーの皆様に感謝いたします。

---

## 📚 関連ドキュメント
- [v2.3.3 リリースノート](RELEASE_NOTES_v2_3_3.md)
- [v2.3.2 リリースノート](RELEASE_NOTES_v2_3_2.md)
